"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/route";
exports.ids = ["app/api/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_cxyz_Codes_web3_blackjack_src_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/route.ts */ \"(rsc)/./src/app/api/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/route\",\n        pathname: \"/api\",\n        filename: \"route\",\n        bundlePath: \"app/api/route\"\n    },\n    resolvedPagePath: \"/Users/cxyz/Codes/web3-blackjack/src/app/api/route.ts\",\n    nextConfigOutput,\n    userland: _Users_cxyz_Codes_web3_blackjack_src_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjRfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmN4eXolMkZDb2RlcyUyRndlYjMtYmxhY2tqYWNrJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmN4eXolMkZDb2RlcyUyRndlYjMtYmxhY2tqYWNrJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNLO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViMy1iYWxja2phY2svP2FiOWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2N4eXovQ29kZXMvd2ViMy1ibGFja2phY2svc3JjL2FwcC9hcGkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2N4eXovQ29kZXMvd2ViMy1ibGFja2phY2svc3JjL2FwcC9hcGkvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/route.ts":
/*!******************************!*\
  !*** ./src/app/api/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+client-dynamodb@3.848.0/node_modules/@aws-sdk/client-dynamodb/dist-es/DynamoDBClient.js\");\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/lib-dynamodb */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.848.0_@aws-sdk+client-dynamodb@3.848.0/node_modules/@aws-sdk/lib-dynamodb/dist-es/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.32.0_bufferutil@4.0.9_typescript@5.8.3_utf-8-validate@5.0.10_zod@3.25.76/node_modules/viem/_esm/utils/signature/verifyMessage.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/.pnpm/jsonwebtoken@9.0.2/node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n// save the score into the database\n// get and put score with tables in database\n\n\n\n\nconst client = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_2__.DynamoDBClient({\n    region: \"us-east-1\",\n    credentials: {\n        accessKeyId: process.env.AWS_ACCESS_KEY_ID || \"\",\n        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || \"\"\n    }\n});\nconst docClient = _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_0__.DynamoDBDocumentClient.from(client);\nasync function putItem(item) {\n    try {\n        const command = new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_0__.PutCommand({\n            TableName: \"blackJack\",\n            Item: item\n        });\n        await docClient.send(command);\n    } catch (error) {\n        throw new Error(\"Error putting item in DynamoDB: \" + error);\n    }\n}\nasync function getItem(player) {\n    try {\n        const command = new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_0__.GetCommand({\n            TableName: \"blackJack\",\n            Key: {\n                player\n            }\n        });\n        const resposne = await docClient.send(command);\n        return resposne.Item || null;\n    } catch (error) {\n        throw new Error(\"Error getting item from DynamoDB: \" + error);\n    }\n}\nasync function updateScoreForPlayer(player, score) {\n    try {\n        const item = await getItem(player);\n        if (!item) {\n            await putItem({\n                player,\n                score\n            });\n        } else {\n            await putItem({\n                player,\n                score\n            });\n        }\n    } catch (error) {\n        throw new Error(\"Error updating score for player: \" + error);\n    }\n}\n// Start the game and get 2 random cards for dealer and player\n// handle the hit and stand and decide who is the winner\nconst suits = [\n    \"♠️\",\n    \"♥️\",\n    \"♦️\",\n    \"♣️\"\n];\nconst ranks = [\n    \"A\",\n    \"2\",\n    \"3\",\n    \"4\",\n    \"5\",\n    \"6\",\n    \"7\",\n    \"8\",\n    \"9\",\n    \"10\",\n    \"J\",\n    \"Q\",\n    \"K\"\n];\nconst initialDeck = suits.map((suit)=>ranks.map((rank)=>({\n            suit: suit,\n            rank: rank\n        }))).flat();\nconst gameState = {\n    dealerHand: [],\n    playerHand: [],\n    deck: initialDeck,\n    message: \"\",\n    score: 0\n};\nfunction getRandomCard(deck, noOfCards) {\n    const randomeIndexSet = new Set();\n    while(randomeIndexSet.size < noOfCards){\n        const randomIndex = Math.floor(Math.random() * deck.length);\n        randomeIndexSet.add(randomIndex);\n    }\n    const randomCards = deck.filter((_, index)=>randomeIndexSet.has(index));\n    const newDeck = deck.filter((_, index)=>!randomeIndexSet.has(index));\n    return [\n        randomCards,\n        newDeck\n    ];\n}\nasync function GET(request) {\n    const url = new URL(request.url);\n    const player = url.searchParams.get(\"player\");\n    if (!player) {\n        return new Response(JSON.stringify({\n            message: \"Player is required\"\n        }), {\n            status: 400\n        });\n    }\n    gameState.deck = [\n        ...initialDeck\n    ];\n    gameState.dealerHand = [];\n    gameState.playerHand = [];\n    gameState.message = \"\";\n    const [dealerHand, deckAfterDealer] = getRandomCard(gameState.deck, 2);\n    const [playerHand, deckAfterPlayer] = getRandomCard(deckAfterDealer, 2);\n    gameState.dealerHand = dealerHand;\n    gameState.playerHand = playerHand;\n    gameState.deck = deckAfterPlayer;\n    const response = await getItem(player);\n    if (!response) {\n        gameState.score = 0;\n    } else {\n        gameState.score = response.score;\n    }\n    return new Response(JSON.stringify({\n        playerHand: gameState.playerHand,\n        dealerHand: [\n            gameState.dealerHand[0],\n            {\n                suit: \"?\",\n                rank: \"?\"\n            }\n        ],\n        message: gameState.message,\n        score: gameState.score\n    }), {\n        status: 200\n    });\n}\n// handle the hit and stand and decide who is the winner\nasync function POST(request) {\n    try {\n        // return if the action is not hit or stand\n        const body = await request.json();\n        const { action, player } = body;\n        // verify if the signaure is correct\n        if (action === \"auth\") {\n            const { signature, message } = body;\n            const isValid = await (0,viem__WEBPACK_IMPORTED_MODULE_3__.verifyMessage)({\n                address: player,\n                signature,\n                message\n            });\n            if (isValid) {\n                const jwtToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                    player\n                }, process.env.JWT_SECRET || \"\", {\n                    expiresIn: \"1h\"\n                });\n                return new Response(JSON.stringify({\n                    token: jwtToken\n                }), {\n                    status: 200\n                });\n            } else {\n                return new Response(JSON.stringify({\n                    message: \"Signaure is invalid\"\n                }), {\n                    status: 400\n                });\n            }\n        }\n        // verify that every request has a valid token\n        const header = request.headers.get(\"Bearer\");\n        if (!header || !header.startsWith(\"Bearer \")) {\n            return new Response(JSON.stringify({\n                message: \"Unauthorized\"\n            }), {\n                status: 401\n            });\n        }\n        const jwtToken = header.split(\" \")[1];\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(jwtToken, process.env.JWT_SECRET || \"\");\n        if (decoded.player.toLocaleLowerCase() !== player.toLocaleLowerCase()) {\n            return new Response(JSON.stringify({\n                message: \"Unauthorized\"\n            }), {\n                status: 401\n            });\n        }\n        // return if the current game is finished\n        if (gameState.message !== \"\") {\n            return new Response(JSON.stringify({\n                playerHand: gameState.playerHand,\n                dealerHand: gameState.dealerHand,\n                message: gameState.message\n            }), {\n                status: 200\n            });\n        }\n        // return if the action is not hit or stand\n        if (action !== \"hit\" && action !== \"stand\") {\n            return new Response(JSON.stringify({\n                message: \"Invalid action\"\n            }), {\n                status: 400\n            });\n        }\n        // hit: 21 - player wins black jack\n        // hit: greater than 21 - player loses, bust\n        // hit: less than 21 = continue, update the player hand\n        if (action === \"hit\") {\n            const [newCard, newDeck] = getRandomCard(gameState.deck, 1);\n            gameState.playerHand.push(...newCard);\n            gameState.deck = newDeck;\n            const playerValue = calculateHandValue(gameState.playerHand);\n            if (playerValue > 21) {\n                gameState.message = \"You lose! busts!\";\n                gameState.score -= 100;\n            } else if (playerValue === 21) {\n                gameState.message = \"You win! Black Jack!\";\n                gameState.score += 100;\n            }\n        } else if (action === \"stand\") {\n            let dealerValue = calculateHandValue(gameState.dealerHand);\n            while(dealerValue < 17){\n                const [newCard, newDeck] = getRandomCard(gameState.deck, 1);\n                gameState.dealerHand.push(...newCard);\n                gameState.deck = newDeck;\n                dealerValue = calculateHandValue(gameState.dealerHand);\n            }\n            const playerValue = calculateHandValue(gameState.playerHand);\n            // stand: 21 - dealer wins, black jack\n            // stand: greate than 21 - player win, dealer bust\n            // stand: less than 21 -\n            // dealer hand > player hand: dealer wins\n            // dealer hand < player hand: player wins\n            // dealer hand = player hand : draw\n            if (dealerValue > 21) {\n                gameState.message = \"You win! Dealer busts!\";\n                gameState.score += 100;\n            } else if (dealerValue === 21) {\n                gameState.message = \"You lose! Black Jack!\";\n                gameState.score -= 100;\n            } else {\n                if (dealerValue > playerValue) {\n                    gameState.message = \"You lose\";\n                    gameState.score -= 100;\n                } else if (dealerValue < playerValue) {\n                    gameState.message = \"You win\";\n                    gameState.score += 100;\n                } else {\n                    gameState.message = \"Draw!\";\n                }\n            }\n        }\n        await updateScoreForPlayer(player, gameState.score);\n        return new Response(JSON.stringify({\n            playerHand: gameState.playerHand,\n            dealerHand: gameState.message !== \"\" ? gameState.dealerHand : [\n                gameState.dealerHand[0],\n                {\n                    suit: \"?\",\n                    rank: \"?\"\n                }\n            ],\n            message: gameState.message,\n            score: gameState.score\n        }), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error parsing request body:\", error);\n        return new Response(JSON.stringify({\n            message: \"Invalid request\"\n        }), {\n            status: 400\n        });\n    }\n}\nfunction calculateHandValue(hand) {\n    let value = 0;\n    let acesCount = 0;\n    hand.forEach((card)=>{\n        if (card.rank === \"A\") {\n            acesCount++;\n            value += 11;\n        } else if (card.rank === \"J\" || card.rank === \"Q\" || card.rank === \"K\") {\n            value += 10;\n        } else {\n            value += parseInt(card.rank);\n        }\n    });\n    while(value > 21 && acesCount > 0){\n        value -= 10;\n        acesCount--;\n    }\n    return value;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztRQUNkMEUsUUFBUTFFLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU8sSUFBSTJDLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUFFMUIsU0FBUztRQUFrQixJQUFJO1lBQ2xFMkIsUUFBUTtRQUNWO0lBQ0Y7QUFDRjtBQUVBLFNBQVMwQixtQkFBbUJHLElBQVk7SUFDdEMsSUFBSUMsUUFBUTtJQUNaLElBQUlDLFlBQVk7SUFDaEJGLEtBQUtHLE9BQU8sQ0FBQyxDQUFDQztRQUNaLElBQUlBLEtBQUtsRSxJQUFJLEtBQUssS0FBSztZQUNyQmdFO1lBQ0FELFNBQVM7UUFDWCxPQUFPLElBQUlHLEtBQUtsRSxJQUFJLEtBQUssT0FBT2tFLEtBQUtsRSxJQUFJLEtBQUssT0FBT2tFLEtBQUtsRSxJQUFJLEtBQUssS0FBSztZQUN0RStELFNBQVM7UUFDWCxPQUFPO1lBQ0xBLFNBQVNJLFNBQVNELEtBQUtsRSxJQUFJO1FBQzdCO0lBQ0Y7SUFFQSxNQUFPK0QsUUFBUSxNQUFNQyxZQUFZLEVBQUc7UUFDbENELFNBQVM7UUFDVEM7SUFDRjtJQUNBLE9BQU9EO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIzLWJhbGNramFjay8uL3NyYy9hcHAvYXBpL3JvdXRlLnRzP2U2NzQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2F2ZSB0aGUgc2NvcmUgaW50byB0aGUgZGF0YWJhc2Vcbi8vIGdldCBhbmQgcHV0IHNjb3JlIHdpdGggdGFibGVzIGluIGRhdGFiYXNlXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZHluYW1vZGJcIjtcbmltcG9ydCB7XG4gIER5bmFtb0RCRG9jdW1lbnRDbGllbnQsXG4gIFB1dENvbW1hbmQsXG4gIEdldENvbW1hbmQsXG59IGZyb20gXCJAYXdzLXNkay9saWItZHluYW1vZGJcIjtcbmltcG9ydCB7IHZlcmlmeU1lc3NhZ2UgfSBmcm9tIFwidmllbVwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNvbnN0IGNsaWVudCA9IG5ldyBEeW5hbW9EQkNsaWVudCh7XG4gIHJlZ2lvbjogXCJ1cy1lYXN0LTFcIixcbiAgY3JlZGVudGlhbHM6IHtcbiAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgfHwgXCJcIixcbiAgICBzZWNyZXRBY2Nlc3NLZXk6IHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSB8fCBcIlwiLFxuICB9LFxufSk7XG5jb25zdCBkb2NDbGllbnQgPSBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LmZyb20oY2xpZW50KTtcblxuaW50ZXJmYWNlIER5bmFtb0l0ZW0ge1xuICBwbGF5ZXI6IHN0cmluZztcbiAgc2NvcmU6IG51bWJlcjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcHV0SXRlbShpdGVtOiBEeW5hbW9JdGVtKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBQdXRDb21tYW5kKHtcbiAgICAgIFRhYmxlTmFtZTogXCJibGFja0phY2tcIixcbiAgICAgIEl0ZW06IGl0ZW0sXG4gICAgfSk7XG4gICAgYXdhaXQgZG9jQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgcHV0dGluZyBpdGVtIGluIER5bmFtb0RCOiBcIiArIGVycm9yKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0SXRlbShwbGF5ZXI6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgR2V0Q29tbWFuZCh7XG4gICAgICBUYWJsZU5hbWU6IFwiYmxhY2tKYWNrXCIsXG4gICAgICBLZXk6IHtcbiAgICAgICAgcGxheWVyLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb3NuZSA9IGF3YWl0IGRvY0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgIHJldHVybiAocmVzcG9zbmUuSXRlbSBhcyBEeW5hbW9JdGVtKSB8fCBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGdldHRpbmcgaXRlbSBmcm9tIER5bmFtb0RCOiBcIiArIGVycm9yKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVTY29yZUZvclBsYXllcihwbGF5ZXI6IHN0cmluZywgc2NvcmU6IG51bWJlcikge1xuICB0cnkge1xuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBnZXRJdGVtKHBsYXllcik7XG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICBhd2FpdCBwdXRJdGVtKHsgcGxheWVyLCBzY29yZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgcHV0SXRlbSh7IHBsYXllciwgc2NvcmUgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHVwZGF0aW5nIHNjb3JlIGZvciBwbGF5ZXI6IFwiICsgZXJyb3IpO1xuICB9XG59XG5cbi8vIFN0YXJ0IHRoZSBnYW1lIGFuZCBnZXQgMiByYW5kb20gY2FyZHMgZm9yIGRlYWxlciBhbmQgcGxheWVyXG4vLyBoYW5kbGUgdGhlIGhpdCBhbmQgc3RhbmQgYW5kIGRlY2lkZSB3aG8gaXMgdGhlIHdpbm5lclxuXG5jb25zdCBzdWl0cyA9IFtcIuKZoO+4j1wiLCBcIuKZpe+4j1wiLCBcIuKZpu+4j1wiLCBcIuKZo++4j1wiXTtcbmNvbnN0IHJhbmtzID0gW1xuICBcIkFcIixcbiAgXCIyXCIsXG4gIFwiM1wiLFxuICBcIjRcIixcbiAgXCI1XCIsXG4gIFwiNlwiLFxuICBcIjdcIixcbiAgXCI4XCIsXG4gIFwiOVwiLFxuICBcIjEwXCIsXG4gIFwiSlwiLFxuICBcIlFcIixcbiAgXCJLXCIsXG5dO1xuY29uc3QgaW5pdGlhbERlY2sgPSBzdWl0c1xuICAubWFwKChzdWl0KSA9PiByYW5rcy5tYXAoKHJhbmspID0+ICh7IHN1aXQ6IHN1aXQsIHJhbms6IHJhbmsgfSkpKVxuICAuZmxhdCgpO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhcmQge1xuICBzdWl0OiBzdHJpbmc7XG4gIHJhbms6IHN0cmluZztcbn1cblxuY29uc3QgZ2FtZVN0YXRlOiB7XG4gIGRlYWxlckhhbmQ6IENhcmRbXTtcbiAgcGxheWVySGFuZDogQ2FyZFtdO1xuICBkZWNrOiBDYXJkW107XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgc2NvcmU6IG51bWJlcjtcbn0gPSB7XG4gIGRlYWxlckhhbmQ6IFtdLFxuICBwbGF5ZXJIYW5kOiBbXSxcbiAgZGVjazogaW5pdGlhbERlY2ssXG4gIG1lc3NhZ2U6IFwiXCIsXG4gIHNjb3JlOiAwLFxufTtcblxuZnVuY3Rpb24gZ2V0UmFuZG9tQ2FyZChkZWNrOiBDYXJkW10sIG5vT2ZDYXJkczogbnVtYmVyKTogW0NhcmRbXSwgQ2FyZFtdXSB7XG4gIGNvbnN0IHJhbmRvbWVJbmRleFNldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICB3aGlsZSAocmFuZG9tZUluZGV4U2V0LnNpemUgPCBub09mQ2FyZHMpIHtcbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRlY2subGVuZ3RoKTtcbiAgICByYW5kb21lSW5kZXhTZXQuYWRkKHJhbmRvbUluZGV4KTtcbiAgfVxuXG4gIGNvbnN0IHJhbmRvbUNhcmRzID0gZGVjay5maWx0ZXIoKF8sIGluZGV4KSA9PiByYW5kb21lSW5kZXhTZXQuaGFzKGluZGV4KSk7XG4gIGNvbnN0IG5ld0RlY2sgPSBkZWNrLmZpbHRlcigoXywgaW5kZXgpID0+ICFyYW5kb21lSW5kZXhTZXQuaGFzKGluZGV4KSk7XG4gIHJldHVybiBbcmFuZG9tQ2FyZHMsIG5ld0RlY2tdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gIGNvbnN0IHBsYXllciA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicGxheWVyXCIpO1xuICBpZiAoIXBsYXllcikge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBcIlBsYXllciBpcyByZXF1aXJlZFwiIH0pLCB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICB9KTtcbiAgfVxuXG4gIGdhbWVTdGF0ZS5kZWNrID0gWy4uLmluaXRpYWxEZWNrXTtcbiAgZ2FtZVN0YXRlLmRlYWxlckhhbmQgPSBbXTtcbiAgZ2FtZVN0YXRlLnBsYXllckhhbmQgPSBbXTtcbiAgZ2FtZVN0YXRlLm1lc3NhZ2UgPSBcIlwiO1xuXG4gIGNvbnN0IFtkZWFsZXJIYW5kLCBkZWNrQWZ0ZXJEZWFsZXJdID0gZ2V0UmFuZG9tQ2FyZChnYW1lU3RhdGUuZGVjaywgMik7XG4gIGNvbnN0IFtwbGF5ZXJIYW5kLCBkZWNrQWZ0ZXJQbGF5ZXJdID0gZ2V0UmFuZG9tQ2FyZChkZWNrQWZ0ZXJEZWFsZXIsIDIpO1xuXG4gIGdhbWVTdGF0ZS5kZWFsZXJIYW5kID0gZGVhbGVySGFuZDtcbiAgZ2FtZVN0YXRlLnBsYXllckhhbmQgPSBwbGF5ZXJIYW5kO1xuICBnYW1lU3RhdGUuZGVjayA9IGRlY2tBZnRlclBsYXllcjtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEl0ZW0ocGxheWVyKTtcbiAgaWYgKCFyZXNwb25zZSkge1xuICAgIGdhbWVTdGF0ZS5zY29yZSA9IDA7XG4gIH0gZWxzZSB7XG4gICAgZ2FtZVN0YXRlLnNjb3JlID0gcmVzcG9uc2Uuc2NvcmU7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHBsYXllckhhbmQ6IGdhbWVTdGF0ZS5wbGF5ZXJIYW5kLFxuICAgICAgZGVhbGVySGFuZDogW2dhbWVTdGF0ZS5kZWFsZXJIYW5kWzBdLCB7IHN1aXQ6IFwiP1wiLCByYW5rOiBcIj9cIiB9IGFzIENhcmRdLFxuICAgICAgbWVzc2FnZTogZ2FtZVN0YXRlLm1lc3NhZ2UsXG4gICAgICBzY29yZTogZ2FtZVN0YXRlLnNjb3JlLFxuICAgIH0pLFxuICAgIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgIH1cbiAgKTtcbn1cblxuLy8gaGFuZGxlIHRoZSBoaXQgYW5kIHN0YW5kIGFuZCBkZWNpZGUgd2hvIGlzIHRoZSB3aW5uZXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyByZXR1cm4gaWYgdGhlIGFjdGlvbiBpcyBub3QgaGl0IG9yIHN0YW5kXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgYWN0aW9uLCBwbGF5ZXIgfSA9IGJvZHk7XG5cbiAgICAvLyB2ZXJpZnkgaWYgdGhlIHNpZ25hdXJlIGlzIGNvcnJlY3RcbiAgICBpZiAoYWN0aW9uID09PSBcImF1dGhcIikge1xuICAgICAgY29uc3QgeyBzaWduYXR1cmUsIG1lc3NhZ2UgfSA9IGJvZHk7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdmVyaWZ5TWVzc2FnZSh7XG4gICAgICAgIGFkZHJlc3M6IHBsYXllcixcbiAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgfSk7XG4gICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICBjb25zdCBqd3RUb2tlbiA9IGp3dC5zaWduKHsgcGxheWVyIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJcIiwge1xuICAgICAgICAgIGV4cGlyZXNJbjogXCIxaFwiLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHRva2VuOiBqd3RUb2tlbiB9KSwge1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBcIlNpZ25hdXJlIGlzIGludmFsaWRcIiB9KSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdmVyaWZ5IHRoYXQgZXZlcnkgcmVxdWVzdCBoYXMgYSB2YWxpZCB0b2tlblxuICAgIGNvbnN0IGhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJCZWFyZXJcIik7XG4gICAgaWYgKCFoZWFkZXIgfHwgIWhlYWRlci5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkge1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IFwiVW5hdXRob3JpemVkXCIgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgand0VG9rZW4gPSBoZWFkZXIuc3BsaXQoXCIgXCIpWzFdO1xuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KGp3dFRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwiXCIpIGFzIHtcbiAgICAgIHBsYXllcjogc3RyaW5nO1xuICAgIH07XG4gICAgaWYgKGRlY29kZWQucGxheWVyLnRvTG9jYWxlTG93ZXJDYXNlKCkgIT09IHBsYXllci50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBpZiB0aGUgY3VycmVudCBnYW1lIGlzIGZpbmlzaGVkXG4gICAgaWYgKGdhbWVTdGF0ZS5tZXNzYWdlICE9PSBcIlwiKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcGxheWVySGFuZDogZ2FtZVN0YXRlLnBsYXllckhhbmQsXG4gICAgICAgICAgZGVhbGVySGFuZDogZ2FtZVN0YXRlLmRlYWxlckhhbmQsXG4gICAgICAgICAgbWVzc2FnZTogZ2FtZVN0YXRlLm1lc3NhZ2UsXG4gICAgICAgIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIGlmIHRoZSBhY3Rpb24gaXMgbm90IGhpdCBvciBzdGFuZFxuICAgIGlmIChhY3Rpb24gIT09IFwiaGl0XCIgJiYgYWN0aW9uICE9PSBcInN0YW5kXCIpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBcIkludmFsaWQgYWN0aW9uXCIgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBoaXQ6IDIxIC0gcGxheWVyIHdpbnMgYmxhY2sgamFja1xuICAgIC8vIGhpdDogZ3JlYXRlciB0aGFuIDIxIC0gcGxheWVyIGxvc2VzLCBidXN0XG4gICAgLy8gaGl0OiBsZXNzIHRoYW4gMjEgPSBjb250aW51ZSwgdXBkYXRlIHRoZSBwbGF5ZXIgaGFuZFxuICAgIGlmIChhY3Rpb24gPT09IFwiaGl0XCIpIHtcbiAgICAgIGNvbnN0IFtuZXdDYXJkLCBuZXdEZWNrXSA9IGdldFJhbmRvbUNhcmQoZ2FtZVN0YXRlLmRlY2ssIDEpO1xuICAgICAgZ2FtZVN0YXRlLnBsYXllckhhbmQucHVzaCguLi5uZXdDYXJkKTtcbiAgICAgIGdhbWVTdGF0ZS5kZWNrID0gbmV3RGVjaztcblxuICAgICAgY29uc3QgcGxheWVyVmFsdWUgPSBjYWxjdWxhdGVIYW5kVmFsdWUoZ2FtZVN0YXRlLnBsYXllckhhbmQpO1xuICAgICAgaWYgKHBsYXllclZhbHVlID4gMjEpIHtcbiAgICAgICAgZ2FtZVN0YXRlLm1lc3NhZ2UgPSBcIllvdSBsb3NlISBidXN0cyFcIjtcbiAgICAgICAgZ2FtZVN0YXRlLnNjb3JlIC09IDEwMDtcbiAgICAgIH0gZWxzZSBpZiAocGxheWVyVmFsdWUgPT09IDIxKSB7XG4gICAgICAgIGdhbWVTdGF0ZS5tZXNzYWdlID0gXCJZb3Ugd2luISBCbGFjayBKYWNrIVwiO1xuICAgICAgICBnYW1lU3RhdGUuc2NvcmUgKz0gMTAwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInN0YW5kXCIpIHtcbiAgICAgIGxldCBkZWFsZXJWYWx1ZSA9IGNhbGN1bGF0ZUhhbmRWYWx1ZShnYW1lU3RhdGUuZGVhbGVySGFuZCk7XG4gICAgICB3aGlsZSAoZGVhbGVyVmFsdWUgPCAxNykge1xuICAgICAgICBjb25zdCBbbmV3Q2FyZCwgbmV3RGVja10gPSBnZXRSYW5kb21DYXJkKGdhbWVTdGF0ZS5kZWNrLCAxKTtcbiAgICAgICAgZ2FtZVN0YXRlLmRlYWxlckhhbmQucHVzaCguLi5uZXdDYXJkKTtcbiAgICAgICAgZ2FtZVN0YXRlLmRlY2sgPSBuZXdEZWNrO1xuICAgICAgICBkZWFsZXJWYWx1ZSA9IGNhbGN1bGF0ZUhhbmRWYWx1ZShnYW1lU3RhdGUuZGVhbGVySGFuZCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYXllclZhbHVlID0gY2FsY3VsYXRlSGFuZFZhbHVlKGdhbWVTdGF0ZS5wbGF5ZXJIYW5kKTtcbiAgICAgIC8vIHN0YW5kOiAyMSAtIGRlYWxlciB3aW5zLCBibGFjayBqYWNrXG4gICAgICAvLyBzdGFuZDogZ3JlYXRlIHRoYW4gMjEgLSBwbGF5ZXIgd2luLCBkZWFsZXIgYnVzdFxuICAgICAgLy8gc3RhbmQ6IGxlc3MgdGhhbiAyMSAtXG4gICAgICAvLyBkZWFsZXIgaGFuZCA+IHBsYXllciBoYW5kOiBkZWFsZXIgd2luc1xuICAgICAgLy8gZGVhbGVyIGhhbmQgPCBwbGF5ZXIgaGFuZDogcGxheWVyIHdpbnNcbiAgICAgIC8vIGRlYWxlciBoYW5kID0gcGxheWVyIGhhbmQgOiBkcmF3XG5cbiAgICAgIGlmIChkZWFsZXJWYWx1ZSA+IDIxKSB7XG4gICAgICAgIGdhbWVTdGF0ZS5tZXNzYWdlID0gXCJZb3Ugd2luISBEZWFsZXIgYnVzdHMhXCI7XG4gICAgICAgIGdhbWVTdGF0ZS5zY29yZSArPSAxMDA7XG4gICAgICB9IGVsc2UgaWYgKGRlYWxlclZhbHVlID09PSAyMSkge1xuICAgICAgICBnYW1lU3RhdGUubWVzc2FnZSA9IFwiWW91IGxvc2UhIEJsYWNrIEphY2shXCI7XG4gICAgICAgIGdhbWVTdGF0ZS5zY29yZSAtPSAxMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVhbGVyVmFsdWUgPiBwbGF5ZXJWYWx1ZSkge1xuICAgICAgICAgIGdhbWVTdGF0ZS5tZXNzYWdlID0gXCJZb3UgbG9zZVwiO1xuICAgICAgICAgIGdhbWVTdGF0ZS5zY29yZSAtPSAxMDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVhbGVyVmFsdWUgPCBwbGF5ZXJWYWx1ZSkge1xuICAgICAgICAgIGdhbWVTdGF0ZS5tZXNzYWdlID0gXCJZb3Ugd2luXCI7XG4gICAgICAgICAgZ2FtZVN0YXRlLnNjb3JlICs9IDEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYW1lU3RhdGUubWVzc2FnZSA9IFwiRHJhdyFcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHVwZGF0ZVNjb3JlRm9yUGxheWVyKHBsYXllciwgZ2FtZVN0YXRlLnNjb3JlKTtcblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHBsYXllckhhbmQ6IGdhbWVTdGF0ZS5wbGF5ZXJIYW5kLFxuICAgICAgICBkZWFsZXJIYW5kOlxuICAgICAgICAgIGdhbWVTdGF0ZS5tZXNzYWdlICE9PSBcIlwiXG4gICAgICAgICAgICA/IGdhbWVTdGF0ZS5kZWFsZXJIYW5kXG4gICAgICAgICAgICA6IFtnYW1lU3RhdGUuZGVhbGVySGFuZFswXSwgeyBzdWl0OiBcIj9cIiwgcmFuazogXCI/XCIgfSBhcyBDYXJkXSxcbiAgICAgICAgbWVzc2FnZTogZ2FtZVN0YXRlLm1lc3NhZ2UsXG4gICAgICAgIHNjb3JlOiBnYW1lU3RhdGUuc2NvcmUsXG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyByZXF1ZXN0IGJvZHk6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3RcIiB9KSwge1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlSGFuZFZhbHVlKGhhbmQ6IENhcmRbXSk6IG51bWJlciB7XG4gIGxldCB2YWx1ZSA9IDA7XG4gIGxldCBhY2VzQ291bnQgPSAwO1xuICBoYW5kLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICBpZiAoY2FyZC5yYW5rID09PSBcIkFcIikge1xuICAgICAgYWNlc0NvdW50Kys7XG4gICAgICB2YWx1ZSArPSAxMTtcbiAgICB9IGVsc2UgaWYgKGNhcmQucmFuayA9PT0gXCJKXCIgfHwgY2FyZC5yYW5rID09PSBcIlFcIiB8fCBjYXJkLnJhbmsgPT09IFwiS1wiKSB7XG4gICAgICB2YWx1ZSArPSAxMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcGFyc2VJbnQoY2FyZC5yYW5rKTtcbiAgICB9XG4gIH0pO1xuXG4gIHdoaWxlICh2YWx1ZSA+IDIxICYmIGFjZXNDb3VudCA+IDApIHtcbiAgICB2YWx1ZSAtPSAxMDtcbiAgICBhY2VzQ291bnQtLTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG4iXSwibmFtZXMiOlsiRHluYW1vREJDbGllbnQiLCJEeW5hbW9EQkRvY3VtZW50Q2xpZW50IiwiUHV0Q29tbWFuZCIsIkdldENvbW1hbmQiLCJ2ZXJpZnlNZXNzYWdlIiwiand0IiwiY2xpZW50IiwicmVnaW9uIiwiY3JlZGVudGlhbHMiLCJhY2Nlc3NLZXlJZCIsInByb2Nlc3MiLCJlbnYiLCJBV1NfQUNDRVNTX0tFWV9JRCIsInNlY3JldEFjY2Vzc0tleSIsIkFXU19TRUNSRVRfQUNDRVNTX0tFWSIsImRvY0NsaWVudCIsImZyb20iLCJwdXRJdGVtIiwiaXRlbSIsImNvbW1hbmQiLCJUYWJsZU5hbWUiLCJJdGVtIiwic2VuZCIsImVycm9yIiwiRXJyb3IiLCJnZXRJdGVtIiwicGxheWVyIiwiS2V5IiwicmVzcG9zbmUiLCJ1cGRhdGVTY29yZUZvclBsYXllciIsInNjb3JlIiwic3VpdHMiLCJyYW5rcyIsImluaXRpYWxEZWNrIiwibWFwIiwic3VpdCIsInJhbmsiLCJmbGF0IiwiZ2FtZVN0YXRlIiwiZGVhbGVySGFuZCIsInBsYXllckhhbmQiLCJkZWNrIiwibWVzc2FnZSIsImdldFJhbmRvbUNhcmQiLCJub09mQ2FyZHMiLCJyYW5kb21lSW5kZXhTZXQiLCJTZXQiLCJzaXplIiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJhZGQiLCJyYW5kb21DYXJkcyIsImZpbHRlciIsIl8iLCJpbmRleCIsImhhcyIsIm5ld0RlY2siLCJHRVQiLCJyZXF1ZXN0IiwidXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiUmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwiZGVja0FmdGVyRGVhbGVyIiwiZGVja0FmdGVyUGxheWVyIiwicmVzcG9uc2UiLCJQT1NUIiwiYm9keSIsImpzb24iLCJhY3Rpb24iLCJzaWduYXR1cmUiLCJpc1ZhbGlkIiwiYWRkcmVzcyIsImp3dFRva2VuIiwic2lnbiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ0b2tlbiIsImhlYWRlciIsImhlYWRlcnMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWNvZGVkIiwidmVyaWZ5IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJuZXdDYXJkIiwicHVzaCIsInBsYXllclZhbHVlIiwiY2FsY3VsYXRlSGFuZFZhbHVlIiwiZGVhbGVyVmFsdWUiLCJjb25zb2xlIiwiaGFuZCIsInZhbHVlIiwiYWNlc0NvdW50IiwiZm9yRWFjaCIsImNhcmQiLCJwYXJzZUludCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/viem@2.32.0_bufferutil@4.0.9_typescript@5.8.3_utf-8-validate@5.0.10_zod@3.25.76","vendor-chunks/@noble+hashes@1.8.0","vendor-chunks/@smithy+core@3.7.1","vendor-chunks/ms@2.1.3","vendor-chunks/safe-buffer@5.2.1","vendor-chunks/semver@7.7.2","vendor-chunks/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/@aws-sdk+core@3.846.0","vendor-chunks/@smithy+types@4.3.1","vendor-chunks/@smithy+util-endpoints@3.0.6","vendor-chunks/@aws-sdk+client-dynamodb@3.848.0","vendor-chunks/@smithy+smithy-client@4.4.8","vendor-chunks/@aws-sdk+lib-dynamodb@3.848.0_@aws-sdk+client-dynamodb@3.848.0","vendor-chunks/@smithy+config-resolver@4.1.4","vendor-chunks/@smithy+util-stream@4.2.3","vendor-chunks/@smithy+shared-ini-file-loader@4.0.4","vendor-chunks/@aws-sdk+util-endpoints@3.848.0","vendor-chunks/@smithy+signature-v4@5.1.2","vendor-chunks/@smithy+node-http-handler@4.1.0","vendor-chunks/@smithy+middleware-endpoint@4.1.16","vendor-chunks/jsonwebtoken@9.0.2","vendor-chunks/@smithy+middleware-retry@4.1.17","vendor-chunks/@smithy+util-retry@4.0.6","vendor-chunks/@smithy+protocol-http@5.1.2","vendor-chunks/@smithy+property-provider@4.0.4","vendor-chunks/@aws-sdk+util-dynamodb@3.848.0_@aws-sdk+client-dynamodb@3.848.0","vendor-chunks/@aws-sdk+region-config-resolver@3.840.0","vendor-chunks/@aws-sdk+middleware-endpoint-discovery@3.840.0","vendor-chunks/uuid@9.0.1","vendor-chunks/@smithy+node-config-provider@4.1.3","vendor-chunks/@aws-sdk+middleware-user-agent@3.848.0","vendor-chunks/jws@3.2.2","vendor-chunks/@smithy+fetch-http-handler@5.1.0","vendor-chunks/@aws-sdk+util-user-agent-node@3.848.0","vendor-chunks/@smithy+util-utf8@4.0.0","vendor-chunks/@smithy+util-defaults-mode-node@4.0.24","vendor-chunks/@smithy+util-config-provider@4.0.0","vendor-chunks/@smithy+middleware-serde@4.0.8","vendor-chunks/mnemonist@0.38.3","vendor-chunks/@smithy+util-uri-escape@4.0.0","vendor-chunks/@smithy+util-middleware@4.0.4","vendor-chunks/@smithy+util-base64@4.0.0","vendor-chunks/@aws-sdk+endpoint-cache@3.804.0","vendor-chunks/@aws-sdk+credential-provider-node@3.848.0","vendor-chunks/obliterator@1.6.1","vendor-chunks/ecdsa-sig-formatter@1.0.11","vendor-chunks/@smithy+util-body-length-node@4.0.0","vendor-chunks/@smithy+service-error-classification@4.0.6","vendor-chunks/@smithy+middleware-stack@4.0.4","vendor-chunks/@aws-sdk+middleware-logger@3.840.0","vendor-chunks/@aws-sdk+credential-provider-env@3.846.0","vendor-chunks/lodash.once@4.1.1","vendor-chunks/lodash.isstring@4.0.1","vendor-chunks/lodash.isplainobject@4.0.6","vendor-chunks/lodash.isnumber@3.0.3","vendor-chunks/lodash.isinteger@4.0.4","vendor-chunks/lodash.isboolean@3.0.3","vendor-chunks/lodash.includes@4.3.0","vendor-chunks/jwa@1.4.2","vendor-chunks/buffer-equal-constant-time@1.0.1","vendor-chunks/@smithy+util-hex-encoding@4.0.0","vendor-chunks/@smithy+util-buffer-from@4.0.0","vendor-chunks/@smithy+url-parser@4.0.4","vendor-chunks/@smithy+querystring-parser@4.0.4","vendor-chunks/@smithy+querystring-builder@4.0.4","vendor-chunks/@smithy+middleware-content-length@4.0.4","vendor-chunks/@smithy+is-array-buffer@4.0.0","vendor-chunks/@smithy+hash-node@4.0.4","vendor-chunks/@aws-sdk+middleware-recursion-detection@3.840.0","vendor-chunks/@aws-sdk+middleware-host-header@3.840.0"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcxyz%2FCodes%2Fweb3-blackjack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();